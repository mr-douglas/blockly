<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Generate Python Programs with Blockly</title>
    <link href="https://fonts.googleapis.com/css2?family=Varela+Round&display=swap" rel="stylesheet">

    <!-- These are from other projects -->
    <link rel=stylesheet href="libraries/codemirror.css">
    <link rel=stylesheet href="libraries/cobalt.css">
    <script src="libraries/codemirror.js"></script>
    <script src="libraries/python.js"></script>
    <script src="libraries/skulpt.min.js" type="text/javascript"></script> 
    <script src="libraries/skulpt-stdlib.js" type="text/javascript"></script>
    <!-- Original sources
    <link rel=stylesheet href="https://codemirror.net/lib/codemirror.css">
    <link rel=stylesheet href="https://codemirror.net/theme/cobalt.css">
    <script src="https://codemirror.net/lib/codemirror.js"></script>
    <script src="https://codemirror.net/mode/python/python.js"></script>
    <script src="libraries/skulpt.min.js" type="text/javascript"></script> 
    <script src="http://www.skulpt.org/js/skulpt-stdlib.js" type="text/javascript"></script>
    -->
    
    <script src="https://kit.fontawesome.com/7943986573.js" crossorigin="anonymous"></script>
    
    <!-- Only use these in development
    <script src="blockly_uncompressed.js"></script>
    <script src="generators/python.js"></script>
    <script src="generators/python/colour.js"></script>
    <script src="generators/python/custom_code.js"></script>
    <script src="generators/python/data_types.js"></script>
    <script src="generators/python/ev3.js"></script>
    <script src="generators/python/lists.js"></script>
    <script src="generators/python/logic.js"></script>
    <script src="generators/python/loops.js"></script>
    <script src="generators/python/math.js"></script>
    <script src="generators/python/procedures.js"></script>
    <script src="generators/python/rpi.js"></script>
    <script src="generators/python/text.js"></script>
    <script src="generators/python/time.js"></script>
    <script src="generators/python/turtle.js"></script>
    <script src="generators/python/variables.js"></script>
    <script src="generators/python/variables_dynamic.js"></script>
    <script src="blocks/colour.js"></script>
    <script src="blocks/custom_code.js"></script>
    <script src="blocks/data_types.js"></script>
    <script src="blocks/ev3.js"></script>
    <script src="blocks/lists.js"></script>
    <script src="blocks/logic.js"></script>
    <script src="blocks/loops.js"></script>
    <script src="blocks/math.js"></script>
    <script src="blocks/procedures.js"></script>
    <script src="blocks/rpi.js"></script>
    <script src="blocks/time.js"></script>
    <script src="blocks/text.js"></script>
    <script src="blocks/turtle.js"></script>
    <script src="blocks/variables.js"></script>
    <script src="blocks/variables_dynamic.js"></script>
    <script src="msg/js/en.js"></script>
    -->
    <!-- These are the compressed versions ready for use -->
    <script src="blockly_compressed.js"></script>
    <script src="blocks_compressed.js"></script>
    <script src="python_compressed.js"></script>
    <script src="en.js"></script>
    
    <!-- JS and CSS files for this specific tool -->
    <script src="blockly_setup_beginning.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <xml id="toolbox" style="display: none;">
      <category name="Maths" colour='%{BKY_MATH_HUE}' web-class="myLabelStyle">
        <category name="Basics" colour='%{BKY_MATH_HUE}'>
          <block type="math_number"><field name="NUM">0</field></block>
          <block type="math_arithmetic"><field name="OP">ADD</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>
          <block type="math_arithmetic"><field name="OP">MINUS</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>
          <block type="math_arithmetic"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
          <block type="math_arithmetic"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
          <block type="math_arithmetic"><field name="OP">POWER</field><value name="A"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="B"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
          <block type="math_single"><value name="NUM"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>
          <block type="math_constant"></block>
        </category>
        <category name="Random" colour='%{BKY_MATH_HUE}'>
          <block type="math_random_int"><value name="FROM"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="TO"><shadow type="math_number"><field name="NUM">100</field></shadow></value></block>
          <block type="math_random_float"></block>
        </category>
        <category name="Trigonometry" colour='%{BKY_MATH_HUE}'>
          <block type="math_trig"><field name="OP">SIN</field> <value name="NUM"><shadow type="math_number"><field name="NUM">45</field></shadow></value></block>
          <block type="math_trig"><field name="OP">COS</field> <value name="NUM"><shadow type="math_number"><field name="NUM">45</field></shadow></value></block>
          <block type="math_trig"> <field name="OP">TAN</field> <value name="NUM"><shadow type="math_number"><field name="NUM">45</field></shadow></value></block>
          <block type="math_inv_trig"><field name="OP">ASIN</field> <value name="NUM"><shadow type="math_constant"><field name="CONSTANT">SQRT1_2</field></shadow></value></block>
          <block type="math_inv_trig"><field name="OP">ACOS</field> <value name="NUM"><shadow type="math_constant"><field name="CONSTANT">SQRT1_2</field></shadow></value></block>
          <block type="math_inv_trig"> <field name="OP">ATAN</field> <value name="NUM"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
        </category>
        <category name="Other" colour='%{BKY_MATH_HUE}'>
          <block type="math_number_property"><value name="NUMBER_TO_CHECK"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>      
          <block type="math_round"><value name="NUM"><shadow type="math_number"><field name="NUM">3.1</field></shadow></value></block>
          <block type="math_on_list"></block>
          <block type="math_modulo"><value name="DIVIDEND"><shadow type="math_number"><field name="NUM">64</field></shadow></value><value name="DIVISOR"><shadow type="math_number"><field name="NUM">10</field></shadow></value></block>
          <block type="math_constrain"><value name="VALUE"><shadow type="math_number"><field name="NUM">50</field></shadow></value><value name="LOW"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="HIGH"><shadow type="math_number"><field name="NUM">100</field></shadow></value></block>
        </category>
      </category>
      <category colour='%{BKY_TEXTS_HUE}' name="Input/Output">
        <block type="text_print"><value name="TEXT"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
        <block type="text_prompt_ext"><value name="TEXT"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
        <block type="time_sleep"><value name="SECS"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
      </category>
      <category colour='%{BKY_TEXTS_HUE}' name="Strings (Text)">
        <block type="text"></block>
        <block type="text_join"></block>
        <block type="text_append"><value name="TEXT"><shadow type="text"></shadow></value></block>
        <block type="text_length"><value name="VALUE"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
        <block type="text_isEmpty"><value name="VALUE"><shadow type="text"><field name="TEXT"></field></shadow></value></block>
        <block type="text_indexOf"><value name="VALUE"><block type="variables_get"><field name="VAR">text</field></block></value><value name="FIND"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
        <block type="text_charAt"><value name="VALUE"><block type="variables_get"><field name="VAR">text</field></block></value></block>
        <block type="text_getSubstring"><value name="STRING"><block type="variables_get"><field name="VAR">text</field></block></value></block>
        <block type="text_changeCase"><value name="TEXT"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
        <block type="text_trim"><value name="TEXT"><shadow type="text"><field name="TEXT">abc</field></shadow></value></block>
      </category>
      <sep></sep>
      <category name="Selection (If/Else) and Logic" colour='%{BKY_LOGIC_HUE}'>
        <block type="controls_if"></block>
        <block type="logic_compare"></block>
        <block type="logic_operation"></block>
        <block type="logic_negate"></block>
        <block type="logic_boolean"></block>
        <block type="logic_null"></block>
      </category>
      <category name="Iteration (Loops)" colour='%{BKY_LOOPS_HUE}'>
        <block type="controls_repeat_ext"><value name="TIMES"><shadow type="math_number"><field name="NUM">10</field></shadow></value></block>
        <block type="controls_whileUntil"></block>
        <block type="controls_for"><value name="FROM"><shadow type="math_number"><field name="NUM">1</field></shadow></value><value name="TO"><shadow type="math_number"><field name="NUM">10</field></shadow></value><value name="BY"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
        <block type="controls_forEach"></block>
        <block type="controls_flow_statements"></block>
      </category>
      <category  name="Data Types" colour='%{BKY_VARIABLES_HUE}'>
        <block type="float"></block>
        <block type="int"></block>
        <block type="str"></block>
      </category>
      <sep></sep>
      <category colour='%{BKY_LISTS_HUE}' name="Lists">
        <block type="lists_create_with"><mutation items="0"></mutation></block>
        <block type="lists_create_with"></block>
        <block type="lists_repeat"><value name="NUM"><shadow type="math_number"><field name="NUM">5</field></shadow></value></block>
        <block type="lists_length"></block>
        <block type="lists_isEmpty"></block>
        <block type="lists_indexOf"><value name="VALUE"><block type="variables_get"><field name="VAR">list</field></block></value></block>
        <block type="lists_getIndex"><value name="VALUE"><block type="variables_get"><field name="VAR">list</field></block></value></block>
        <block type="lists_setIndex"><value name="LIST"><block type="variables_get"><field name="VAR">list</field></block></value></block>
        <block type="lists_getSublist"><value name="LIST"><block type="variables_get"><field name="VAR">list</field></block></value></block>
        <block type="lists_split"><value name="DELIM"><shadow type="text"><field name="TEXT">,</field></shadow></value></block>
        <block type="lists_sort"></block>
      </category>
      <category colour='%{BKY_VARIABLES_HUE}' custom="VARIABLE" name="Variables"></category>
      <category colour='%{BKY_PROCEDURES_HUE}' custom="PROCEDURE" name="Functions"></category>
      <sep></sep>
      <category name="Turtle" colour='%{BKY_COLOUR_HUE}'>
        <block type="turtle_move"><value name="DISTANCE"><shadow type="math_number"><field name="NUM">100</field></shadow></value></block>
        <block type="turtle_turn"><value name="ANGLE"><shadow type="math_number"><field name="NUM">45</field></shadow></value></block>
        <block type="turtle_turn_left"></block>
        <block type="turtle_turn_right"></block>
        <block type="turtle_goto"><value name="X"><shadow type="math_number"><field name="NUM">0</field></shadow></value><value name="Y"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>
        <block type="turtle_set_speed"></block>
        <block type="turtle_pen_up_down"></block>
        <block type="turtle_pen_colour"></block>
        <block type="turtle_fill_colour"></block>
        <block type="turtle_pen_fill_colour"></block>
        <block type="turtle_begin_fill"></block>
        <block type="turtle_end_fill"></block>
        <block type="turtle_begin_end_fill"></block>
        <block type="turtle_set_pen_size"></block>
        <block type="turtle_set_direction_four"></block>
        <block type="turtle_set_direction_angle"></block>
        <block type="turtle_set_direction"></block>
        <block type="turtle_get_coord"></block>
        <block type="turtle_show"></block>
        <block type="turtle_hide"></block>
        <block type="colour_picker"></block>
        <block type="colour_random"></block>
        <block type="colour_rgb"><value name="RED"><shadow type="math_number"><field name="NUM">100</field></shadow></value><value name="GREEN"><shadow type="math_number"><field name="NUM">50</field></shadow></value><value name="BLUE"><shadow type="math_number"><field name="NUM">0</field></shadow></value></block>
        <block type="colour_blend"><value name="COLOUR1"><shadow type="colour_picker"><field name="COLOUR">#ff0000</field></shadow></value><value name="COLOUR2"><shadow type="colour_picker"><field name="COLOUR">#3333ff</field></shadow></value><value name="RATIO"><shadow type="math_number"><field name="NUM">0.5</field></shadow></value></block>
      </category>
      <category colour='90' name="EV3">
        <category colour='90' name="Brick">
          <block type="ev3_set_up"></block>
          <block type="ev3_beep"><value name="FREQUENCY"><shadow type="math_number"><field name="NUM">500</field></shadow></value><value name="DURATION"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
          <block type="ev3_set_volume"><value name="VOLUME"><shadow type="math_number"><field name="NUM">50</field></shadow></value></block>
          <block type="ev3_color"></block>
          <block type="ev3_brick_light_on"><value name="COLOR"><shadow type="ev3_color"><field name="COLOR">#00cc00</field></shadow></value></block>
          <block type="ev3_brick_light_off"></block>
          <block type="ev3_brick_buttons_pressed"></block>
          <block type="ev3_wait"><value name="TIME"><shadow type="math_number"><field name="NUM">60</field></shadow></value></block>
          <block type="ev3_screen_font"></block>
          <block type="ev3_screen_print"></block>
        </category>
        <category colour='90' name="Motors" custom="EV3_MOTORS"></category>
        <category colour='90' name="Sensors" custom="EV3_SENSORS"></category>
        <block type="ev3_set_up"></block>
        <block type="ev3_color"></block>
      </category>
      <category colour='270' name="Raspberry Pi">
        <block type="time_sleep"><value name="SECS"><shadow type="math_number"><field name="NUM">1</field></shadow></value></block>
        <block type="time_get_current_time"></block>
        <category colour='270' name="LED" custom="RPi_LED"></category>
        <category colour='270' name="RGB LED" custom="RPi_RGB_LED"></category>
        <category colour='270' name="Button" custom="RPi_Button"></category>
        <category colour='270' name="Light Sensor" custom="RPi_Light_Sensor"></category>
        <category colour='270' name="Buzzer" custom="RPi_Buzzer"></category>
        <category colour='270' name='Servo' custom="RPi_Servo"></category>
        <category colour='270' name='Ultrasonic Distance Sensor' custom="RPi_USonic_Sensor"></category>
        <category colour='270' name='Motion Sensor' custom="RPi_Motion_Sensor"></category>
        <category colour='270' name="Digital Input" custom="RPi_Digital_Input"></category>
        <category colour='270' name="Digital Output" custom="RPi_Digital_Output"></category>
        <category colour='270' name="PWM Output" custom="RPi_PWM_Output"></category>
      </category>
      <sep></sep>
      <category colour='black' name="Insert Your Own Code">
        <block type="insert_user_code"></block>
      </category>
    </xml>
    <div id="python-container">
      <textarea readonly id="python-div">
      </textarea>
    </div>
    <p id="copied-alert" class="hidden"><span class="icon"><i class="fas fa-copy"></i></span><span class="text"> Copied!</span></p>
    <a id="copy-python-button" class="my-button" onclick="copyToClipboard()"><span class="icon"><i class="fas fa-copy"></i></span><span class="text"> Copy Python to Clipboard</span></a>
    <a id="save-python-button" class="my-button" onclick="saveToFile(Blockly.Python.workspaceToCode(workspace), '.py')"><span class="icon"><i class="fas fa-file-download"></i></span><span class="text"> Save Python Code</span></a>
    <a id="run-blocks-button" class="my-button" onclick="runPython()"><span class="icon"><i class="fas fa-play"></i></span><span class="text"> Run Program</span></a>
    <a id="load-blocks-button" class="my-button" onclick="document.getElementById('inputfile').click()"><span class="icon"><i class="fas fa-file-upload"></i></span><span class="text"> Load Blocks from File</span></a>
    <a id="save-blocks-button" class="my-button" onclick="saveToFile(Blockly.Xml.domToPrettyText(Blockly.Xml.workspaceToDom(workspace)), '.blockly')"><span class="icon"><i class="fas fa-file-download"></i></span><span class="text"> Save Blocks to File</span></a>
    <input type="file" name="inputfile" id="inputfile" style="display: none;">
    <div id="excluder" class="hidden">
    </div>
    <div id="skulpt-container" class="hidden">
      <textarea id="skulpt-console" class="both" readonly="true"></textarea> 
      <div id="skulpt-canvas" class="both"></div>
      <a id="skulpt-close-button" class="my-button" onclick="stopPython(); document.getElementById('excluder').className='hidden'; document.getElementById('skulpt-container').className='hidden';"><span class="icon"><i class="fas fa-times"></i></span><span class="text"> Close</span></a>
    </div>
    <div id="blocklyDiv"></div>
    <script src="blockly_setup_end.js"></script>
  </body>
</html>